{
    "type": "Ext.form.Panel",
    "reference": {
        "name": "items",
        "type": "array"
    },
    "codeClass": null,
    "userConfig": {
        "id": "CardConfirmationPanel",
        "width": null,
        "designer|userClassName": "CardConfirmationPanel",
        "designer|userAlias": "CardConfirmationPanel"
    },
    "designerId": "110063a5-125b-4e8d-8b64-48453e4b7c0a",
    "cn": [
        {
            "type": "Ext.Toolbar",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "docked": "top",
                "title": "Complete Order"
            },
            "designerId": "b560ef6b-c4d0-4ab2-aecc-2a1d641a3d80",
            "cn": [
                {
                    "type": "Ext.Button",
                    "reference": {
                        "name": "items",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "ui": "back",
                        "text": "Back"
                    },
                    "designerId": "0f76cc37-7431-4b4e-8575-a49482bbcb99",
                    "cn": [
                        {
                            "type": "fixedfunction",
                            "reference": {
                                "name": "items",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "fn": "handler",
                                "designer|params": [
                                    "button",
                                    "event"
                                ],
                                "implHandler": [
                                    "Ext.getCmp('CardInfoPanel').show({type:'slideIn',direction:'right'});\r",
                                    "Ext.getCmp('CardConfirmationPanel').hide();"
                                ]
                            },
                            "designerId": "b13b0c7f-1bbb-4897-8df8-3e43d33ba50b"
                        }
                    ]
                }
            ]
        },
        {
            "type": "Ext.form.FieldSet",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "id": "PRODUCTINFO",
                "itemId": "PRODUCTINFO",
                "width": null,
                "title": null
            },
            "designerId": "d5861347-1cf8-412a-b9ec-5bd495c3bcae",
            "cn": [
                {
                    "type": "Ext.field.Text",
                    "reference": {
                        "name": "items",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "label": "Jersey Size:",
                        "labelWidth": "40%",
                        "name": "jerseySize",
                        "readOnly": true
                    },
                    "designerId": "19f753c7-459c-4bf7-90ef-dfe3360972ba"
                },
                {
                    "type": "Ext.field.Text",
                    "reference": {
                        "name": "items",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "designer|displayName": null,
                        "label": "Product Price:",
                        "labelWidth": "40%",
                        "name": "productPrice",
                        "readOnly": true
                    },
                    "designerId": "81d428f8-7a6c-4ba9-8ebd-2de29e3f0298"
                },
                {
                    "type": "Ext.field.Text",
                    "reference": {
                        "name": "items",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "label": "Jersey Name: ",
                        "labelWidth": "40%",
                        "name": "jerseyName",
                        "readOnly": true
                    },
                    "designerId": "08bef773-fad9-4a70-9504-ac066769cd77"
                },
                {
                    "type": "Ext.field.Text",
                    "reference": {
                        "name": "items",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "label": "Jersey Number: ",
                        "labelWidth": "40%",
                        "name": "jerseyNumber",
                        "readOnly": true
                    },
                    "designerId": "8c6a0dd7-402e-4d0a-9979-e9d585882b6e"
                }
            ]
        },
        {
            "type": "Ext.form.FieldSet",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "id": "CUSTOMERINFO",
                "itemId": "CUSTOMERINFO",
                "title": null
            },
            "designerId": "5035f6c3-02f4-4f2a-b70c-1f62f0cb8c91",
            "cn": [
                {
                    "type": "Ext.field.Text",
                    "reference": {
                        "name": "items",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "label": "Name: ",
                        "labelWidth": "40%",
                        "name": "CurName",
                        "readOnly": true
                    },
                    "designerId": "44fb0efd-0a32-46e9-8d6c-3cc7d2f83b7f"
                },
                {
                    "type": "Ext.field.Text",
                    "reference": {
                        "name": "items",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "label": "Address:",
                        "labelWidth": "40%",
                        "name": "CurAddress",
                        "readOnly": true
                    },
                    "designerId": "32245171-fe19-46dc-abd9-a1afc60e6245"
                },
                {
                    "type": "Ext.field.Text",
                    "reference": {
                        "name": "items",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "label": "City:",
                        "labelWidth": "40%",
                        "name": "CurCity",
                        "readOnly": true
                    },
                    "designerId": "775229ec-c89e-406d-81d3-82ef5cbd1837"
                },
                {
                    "type": "Ext.field.Text",
                    "reference": {
                        "name": "items",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "label": "State:",
                        "labelWidth": "40%",
                        "name": "CurState",
                        "readOnly": true
                    },
                    "designerId": "faf767f5-4637-4049-8bcb-cac1af01c785"
                },
                {
                    "type": "Ext.field.Text",
                    "reference": {
                        "name": "items",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "label": "Zip code:",
                        "labelWidth": "40%",
                        "name": "CurZip",
                        "readOnly": true
                    },
                    "designerId": "1bcaad54-e485-4ab2-9902-45a22ff4dbcc"
                },
                {
                    "type": "Ext.field.Text",
                    "reference": {
                        "name": "items",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "label": "Email",
                        "labelWidth": "40%",
                        "name": "Email",
                        "readOnly": true
                    },
                    "designerId": "e25c3742-2b55-4aaa-86d7-6be4878b0847"
                },
                {
                    "type": "Ext.field.Text",
                    "reference": {
                        "name": "items",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "label": "Phone",
                        "labelWidth": "40%",
                        "name": "Phone",
                        "readOnly": true
                    },
                    "designerId": "582cc0fc-a4f2-4454-9a15-996a95cfc2b6"
                }
            ]
        },
        {
            "type": "Ext.Button",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "ui": "confirm",
                "text": "Submit"
            },
            "designerId": "cb3f436e-0824-41b0-9c4f-197e70933de1",
            "cn": [
                {
                    "type": "fixedfunction",
                    "reference": {
                        "name": "items",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "fn": "handler",
                        "designer|params": [
                            "button",
                            "event"
                        ],
                        "implHandler": [
                            "//Fetch the value object\r",
                            "var formValues = Ext.getCmp('CardConfirmationPanel').getValues();\r",
                            "\r",
                            "var assemblyOptions = { Number: Kiosk4.app.jerseyNumber, Roster: null, Name: Kiosk4.app.jerseyName};\r",
                            "\r",
                            "var orderProducts = [{\r",
                            "    AssemblyId: 1,\r",
                            "    AssemblyOptions: Ext.encode(assemblyOptions),\r",
                            "    DocumentCdl: '',\r",
                            "    ProductId: '5a358ddb-d48a-401a-a2ab-d94dc16febac'\r",
                            "}];\r",
                            "\r",
                            "\r",
                            "\r",
                            "var Test = {};\r",
                            "\r",
                            "Test.HOST ='http://devapp.poweredbycadworx.com/';\r",
                            "Test.SESSION_ID = '89a4a271-51cc-4997-806e-34b30c0c55c8'; //kiosksiesta user\r",
                            "Test.DEPLOYMENT_ID = 'a588e924-8574-459e-a16b-6d13e9c1750f'; //kiosksiesta user Pistons deployment\r",
                            "Test.TERMINAL_ID = ' 95fa42a7-1d26-49fe-99e4-6950ea4390ef'; //Northeast terminal in Pistons deployment\r",
                            "\r",
                            "\r",
                            "var params = {\r",
                            "    DeploymentId: Test.DEPLOYMENT_ID,\r",
                            "    TimeStamp: Ext.Date.format(new Date(), 'c'), //c = ISO 8601 format, sending kiosk time to server\r",
                            "    FakeSwipe:true,\r",
                            "    CustomerData: Ext.encode({ Name: formValues.CurName, Phone: formValues.Phone, Email: formValues.Email }),\r",
                            "    OrderProductsJSON: Ext.encode(orderProducts)\r",
                            "};\r",
                            "\r",
                            "Test.getUrl = function (path, options) {\r",
                            "    if (window.location.pathname.indexOf('CadXWeb') !== -1) {\r",
                            "        Test.HOST += 'CadXWeb/';\r",
                            "    }\r",
                            "\r",
                            "    var url = Test.HOST + path + '?sessionid=' + Test.SESSION_ID;\r",
                            "\r",
                            "    if (options && options.simulateTerminal) {\r",
                            "        url += '&terminalId=' + Test.TERMINAL_ID;\r",
                            "    }\r",
                            "\r",
                            "\r",
                            "    url += '&deploymentId=' + Test.DEPLOYMENT_ID;\r",
                            "    return url;\r",
                            "};\r",
                            "\r",
                            "Test.request = function (url, params, callback, scope, method, responseType) {\r",
                            "    try {\r",
                            "        if (!callback || !scope || !url) {\r",
                            "            throw 'Test.request : missing parameters';\r",
                            "        }\r",
                            "\r",
                            "        method = (typeof method == \"undefined\") ? 'POST' : method;\r",
                            "        responseType = (typeof responseType == \"undefined\") ? 'JSON' : responseType;\r",
                            "\r",
                            "        return Ext.Ajax.request({\r",
                            "            failure: function(){\r",
                            "            }\r",
                            "            , method: method\r",
                            "            , params: params\r",
                            "            , responseType: responseType\r",
                            "            , responseCallback: callback\r",
                            "            , responseScope: scope\r",
                            "            , success: function(){\r",
                            "                if(!Ext.getCmp('alertPanel')){Ext.Viewport.add({xtype: 'alertPanel'});}\r",
                            "                Ext.getCmp('CardConfirmationPanel').unmask();\r",
                            "                Ext.getCmp('alertPanel').show({type:'popIn'});            \r",
                            "            }\r",
                            "            , timeout: 60000\r",
                            "            , url: url\r",
                            "        });\r",
                            "    }\r",
                            "    catch (exception) {\r",
                            "        console.log(exception);\r",
                            "    }\r",
                            "};\r",
                            "Ext.getCmp('CardConfirmationPanel').mask({\r",
                            "    message:'Please wait, processing order...',\r",
                            "xtype: 'loadmask'});\r",
                            "Test.request(\r",
                            "Test.getUrl('Kiosk/Order/Create', { simulateTerminal: true }),\r",
                            "params,\r",
                            "function(data, success, message, xmlHttpRequest, options) { //Callback\r",
                            "    if(!Ext.getCmp('alertPanel')){Ext.Viewport.add({xtype: 'alertPanel'});}\r",
                            "    Ext.getCmp('alertPanel').show({type:'popIn'});\r",
                            "},\r",
                            "this //Scope\r",
                            ");"
                        ]
                    },
                    "designerId": "7313876e-ea97-45d6-a064-d85ff50344bc"
                }
            ]
        }
    ]
}